{"ast":null,"code":"var _jsxFileName = \"/home/manoj/Documents/AI/trade_search/src/search.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Autocomplete from 'react-autocomplete';\nimport axios from 'axios'; // import { useHistory } from 'react-router-dom';\n\nimport { Link } from \"react-router-dom\"; // import {Link,useLocation,withRouter,Redirect} from \"react-router-dom\";\n\nfunction AutoComo(props) {\n  let economics_href = \"\";\n  let demographics_href = \"\";\n  let trade_export_href = \"\";\n  let trade_import_href = \"\";\n\n  function get_list_from_buckets(buckets) {\n    let list_bucket = buckets.map(item => {\n      let index = item._index; // console.log(index)\n\n      let href = \"\";\n      let title = \"\";\n\n      if (index === \"economics_v102_test\") {\n        href = economics_href + item._source.Variablepath;\n        title = item._source.VariableName;\n      }\n\n      if (index === \"demographics_v1_test\") {\n        href = demographics_href + item._source.Variablepath;\n        title = item._source.VariableName;\n      }\n\n      if (index === \"trade_export_yearly_v1\") {\n        href = trade_export_href + item._source.Variablepath;\n        title = item._source.HSCodeName;\n      }\n\n      if (index === \"trade_import_yearly_v1\") {\n        href = trade_import_href + item._source.Variablepath;\n        title = item._source.HSCodeName;\n      } // console.log(index, title)\n\n\n      return {\n        'index': index,\n        'title': title,\n        'href': href\n      };\n    });\n  }\n\n  useEffect(() => {}, []);\n  const [value, setVal] = useState();\n  const [items, setItems] = useState([]); // var value = \"\"\n\n  function handleChange(VariableName) {\n    setItems([]);\n\n    if (VariableName === \"\") {\n      return;\n    }\n\n    var url = 'https://elastic.airesearch.in/economics_v102_test,demographics_v1_test,trade_export_yearly_v1,trade_import_yearly_v1/_search';\n    var query4 = {\n      \"_source\": [\"HSCodeName\", \"VariableName\", \"VariablePath\"],\n      \"query\": {\n        \"bool\": {\n          \"must\": [{\n            \"query_string\": {\n              \"fields\": [\"HSCode^3\", \"HSName^2\", \"HSCodeName^2\", \"Country\", \"VariableName^5\", \"VariablePath\", \"Level1\", \"Level2\", \"Level3\", \"Level4\", \"Level5\"],\n              \"query\": `${VariableName}~`,\n              \"minimum_should_match\": 1\n            }\n          }]\n        }\n      }\n    };\n    axios.post(url, query4).then(d => {\n      if (d.status === 200) {\n        console.log(d.data);\n        let total_data = d.data.hits.hits;\n        let list = get_list_from_buckets(total_data);\n        console.log(list);\n        setItems(list);\n      } else {\n        console.log(\"err\");\n      }\n    }).catch(error => {\n      if (error) {\n        console.log(error);\n      } else {\n        console.log(\"Error!\");\n      }\n    });\n  } // const classes = useStyles();\n\n\n  return (\n    /*#__PURE__*/\n    // <div className={classes.root}>\n    React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 7\n      }\n    }, \"home\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Autocomplete, {\n      getItemValue: item => item.path,\n      items: items,\n      enderItem: (item, isHighlighted) => /*#__PURE__*/React.createElement(\"div\", {\n        className: \"searchDrop\",\n        style: {\n          background: isHighlighted ? 'lightgray' : 'black'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: `/${item.path}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 17\n        }\n      }, item.label)),\n      value: value,\n      onChange: e => {\n        setVal(e.target.value);\n        handleChange(e.target.value);\n      } // onSelect={(val) => {setVal(val);console.log(\"val\",val)}}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 7\n      }\n    }))\n  );\n}\n\nexport default AutoComo;","map":{"version":3,"sources":["/home/manoj/Documents/AI/trade_search/src/search.js"],"names":["React","useState","useEffect","Autocomplete","axios","Link","AutoComo","props","economics_href","demographics_href","trade_export_href","trade_import_href","get_list_from_buckets","buckets","list_bucket","map","item","index","_index","href","title","_source","Variablepath","VariableName","HSCodeName","value","setVal","items","setItems","handleChange","url","query4","post","then","d","status","console","log","data","total_data","hits","list","catch","error","path","isHighlighted","background","label","e","target"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Autocomplete from 'react-autocomplete';\nimport axios from 'axios'\n// import { useHistory } from 'react-router-dom';\nimport {Link} from \"react-router-dom\";\n// import {Link,useLocation,withRouter,Redirect} from \"react-router-dom\";\n\n\nfunction AutoComo(props) {\n\n  let economics_href = \"\"\n  let demographics_href = \"\"\n  let trade_export_href  = \"\"\n  let trade_import_href  = \"\"\n  \n  function get_list_from_buckets(buckets){\n    \n    let list_bucket = buckets.map(item =>{\n      let index = item._index\n      // console.log(index)\n      let href = \"\"\n      let title = \"\"\n      if(index === \"economics_v102_test\"){\n        href = economics_href+item._source.Variablepath\n        title = item._source.VariableName\n      }\n      if(index === \"demographics_v1_test\"){\n        href = demographics_href+item._source.Variablepath\n        title = item._source.VariableName\n      }\n      if(index === \"trade_export_yearly_v1\"){\n        href = trade_export_href+item._source.Variablepath\n        title = item._source.HSCodeName\n      }\n      if(index === \"trade_import_yearly_v1\"){\n        href = trade_import_href+item._source.Variablepath\n        title = item._source.HSCodeName\n      }\n      // console.log(index, title)\n      return {'index':index, 'title':title, 'href':href}\n    })\n  }\n\n\n\n  useEffect(() => {\n  },[])\n\n  const [value,setVal] = useState()\n  const [items,setItems] = useState([])\n\n  \n  // var value = \"\"\n\n  function handleChange(VariableName){\n    setItems([]);\n    if(VariableName === \"\"){\n      \n      return\n    }\n  \n    var url = 'https://elastic.airesearch.in/economics_v102_test,demographics_v1_test,trade_export_yearly_v1,trade_import_yearly_v1/_search'\n          \n  var query4 = {   \n      \"_source\":[\"HSCodeName\",\"VariableName\",\"VariablePath\"],\n      \"query\": {\n      \"bool\": {\n        \"must\":[\n          {\n          \"query_string\":{\n              \"fields\": [\"HSCode^3\",\"HSName^2\",\"HSCodeName^2\",\"Country\",\"VariableName^5\",\"VariablePath\",\"Level1\",\"Level2\",\"Level3\",\"Level4\",\"Level5\"],\n              \"query\": `${VariableName}~`,\n              \"minimum_should_match\": 1\n            }\n          }\n        ]\n      }\n    }\n  }\n    \n          \n            \n            \n  axios.post(url, query4)\n    .then( d => {\n      if(d.status === 200 ){\n        console.log(d.data);\n        let total_data = d.data.hits.hits\n\n        let list = get_list_from_buckets(total_data)\n        console.log(list)\n        setItems(list)\n      }\n      else{\n        console.log(\"err\")\n      }\n    })\n    .catch( error => {\n      if (error) {\n        console.log(error)\n      }\n      else{\n        console.log(\"Error!\");\n      }\n    });\n\n}\n\n  // const classes = useStyles();\n\n\n  return (\n    // <div className={classes.root}>\n    <div>\n      <a href=\"/\" >home</a>\n      <br /><br /><br />\n      \n      <Autocomplete\n            getItemValue={(item) => item.path}\n            items={items}\n            enderItem={(item, isHighlighted) =>\n              <div className=\"searchDrop\"  style={{background: isHighlighted ? 'lightgray' : 'black' }}>\n                <Link to={`/${item.path}`}>\n                 {item.label}\n                </Link>\n              </div>\n            }\n            value={value}\n            onChange={(e) => {setVal(e.target.value);handleChange(e.target.value)}}\n            \n            // onSelect={(val) => {setVal(val);console.log(\"val\",val)}}\n        />\n          \n          \n    </div>\n  );\n}\n\n\n\n\nexport default AutoComo ;"]},"metadata":{},"sourceType":"module"}