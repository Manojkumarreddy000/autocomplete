{"ast":null,"code":"var _jsxFileName = \"/home/manoj/Documents/AI/trade_search/src/search.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Autocomplete from 'react-autocomplete';\nimport axios from 'axios'; // import { useHistory } from 'react-router-dom';\n\nimport { Link } from \"react-router-dom\"; // import {Link,useLocation,withRouter,Redirect} from \"react-router-dom\";\n\nfunction AutoComo(props) {\n  useEffect(() => {// console.log(\"props\",props)\n  }, []); // const history = useHistory();\n  // const goLogin = () => history.push('login');\n  // const [value,setVal] = useState({ title: 'The Shawshank Redemption', year: 1994 })\n\n  const [value, setVal] = useState();\n  const [items, setItems] = useState([]); // var value = \"\"\n\n  function handleChange(VariableName) {\n    setItems([]);\n\n    if (VariableName == \"\") {\n      return;\n    }\n\n    var url = 'https://elastic.airesearch.in/economics_v102_test,trade_import_yearly_v1/_search';\n    var query = {\n      \"query\": {\n        \"bool\": {\n          \"must\": [{\n            \"fuzzy\": {\n              \"VariablePath\": VariableName\n            }\n          }]\n        }\n      },\n      \"aggs\": {\n        \"varpath\": {\n          \"terms\": {\n            \"field\": \"VariablePath.keyword\"\n          }\n        }\n      },\n      \"size\": 0\n    };\n    var query2 = {\n      \"query\": {\n        \"bool\": {\n          \"must\": [{\n            \"query_string\": {\n              \"fields\": [\"HSCode^4\", \"Level5\", \"HSName^4\", \"path\", \"HSCodeName^4\"],\n              \"query\": `${VariableName}~`,\n              \"minimum_should_match\": 1\n            }\n          }]\n        }\n      }\n    };\n    var query3 = {\n      \"query\": {\n        \"bool\": {\n          \"must\": [{\n            \"multi_match\": {\n              \"query\": VariableName,\n              \"fields\": [\"HSCode\", \"Level5\", \"HSName.raw\"]\n            }\n          }]\n        }\n      }\n    };\n    var query4 = {\n      \"_source\": [\"HSCode\", \"HSName\", \"HSCodeName\", \"VariableName\", \"VariablePath\", \"Country\"],\n      \"query\": {\n        \"bool\": {\n          \"must\": [{\n            \"query_string\": {\n              \"fields\": [\"HSCode^3\", \"HSName^2\", \"HSCodeName^2\", \"VariableName^5\", \"VariablePath\"],\n              \"query\": `${VariableName}~`,\n              \"minimum_should_match\": 1\n            }\n          }]\n        }\n      }\n    };\n    axios.post(url, query4).then(d => {\n      if (d.status === 200) {\n        console.log(d.data);\n        let total_data = d.data.hits.hits; // let list = data_list.map(s => {\n        //   // return {'label' :s.key.split(\"/\").join(\" > \"),'path':s.key}\n        //   return {\n        //     'title':s.key,\n        //     'label' :s.key.split(\"/\").join(\" > \"),\n        //     'path':\"chart/\"+s.key.substring(s.key.indexOf('/')+1)\n        //   }\n        //   return {\n        //     'title':s.key,\n        //     'label' :s.key.split(\"/\").join(\" > \"),\n        //     'path':\"chart/\"+s.key.substring(s.key.indexOf('/')+1)\n        //   }\n        // })\n\n        let list = total_data.map(item => {\n          let title = \"\";\n          let path = \"\";\n          let label;\n          let index = item._index;\n\n          if (index === \"economics_v102_test\") {\n            path = item._source.Path;\n\n            if (!path) {\n              path = \" \";\n            } // title = `Path : ${path}       VARIABLE Name -${item._source.VariableName}        PRODUCT : AI-TradeAnalytics`\n\n\n            title = `VARIABLE Name -${item._source.VariableName}    Path : ${path}${item._source.VariableName}       PRODUCT : AI-Economics`; // label = path.split(\"/\").join(\" > \");\n            // label = title;\n            // path = `AI-Economics/${path}${item._source.VariableName}`;\n          } else if (index == \"trade_import_yearly_v1\") {\n            // title = `HSCodeName - ${item._source.HSCodeName}      HSCode - ${item._source.HSCode}       PRODUCT : AI-Economics`;\n            title = `HSCode - ${item._source.HSCode}   Country - ${item._source.Country}    PRODUCT : AI-TradeAnalytics`; // path = `AI-TradeAnalytics/${item._source.HSCode}`\n            // label = title;\n          }\n\n          return {\n            'title': title,\n            'label': title,\n            'path': path\n          };\n        });\n        console.log(list);\n        setItems(list);\n      } else {\n        console.log(\"err\");\n      }\n    }).catch(error => {\n      if (error) {\n        console.log(error);\n      } else {\n        console.log(\"Error!\");\n      }\n    });\n  } // const classes = useStyles();\n\n\n  return (\n    /*#__PURE__*/\n    // <div className={classes.root}>\n    React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 7\n      }\n    }, \"home\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Autocomplete, {\n      getItemValue: item => item.path,\n      items: items,\n      renderItem: (item, isHighlighted) => /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          background: isHighlighted ? 'lightgray' : 'white'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: {\n          items\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 17\n        }\n      }, item.label)),\n      value: value,\n      onChange: e => {\n        setVal(e.target.value);\n        handleChange(e.target.value);\n        console.log(\"target value is\", e.target.value, \".\");\n      },\n      onSelect: val => {\n        setVal(val);\n        console.log(\"val\", val);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 7\n      }\n    }))\n  );\n}\n\nexport default AutoComo;","map":{"version":3,"sources":["/home/manoj/Documents/AI/trade_search/src/search.js"],"names":["React","useState","useEffect","Autocomplete","axios","Link","AutoComo","props","value","setVal","items","setItems","handleChange","VariableName","url","query","query2","query3","query4","post","then","d","status","console","log","data","total_data","hits","list","map","item","title","path","label","index","_index","_source","Path","HSCode","Country","catch","error","isHighlighted","background","e","target","val"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,YAAP,MAAyB,oBAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CACA;;AACA,SAAQC,IAAR,QAAmB,kBAAnB,C,CACA;;AAGA,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;AAEvBL,EAAAA,SAAS,CAAC,MAAM,CACd;AACD,GAFQ,EAEP,EAFO,CAAT,CAFuB,CAMvB;AACA;AAEA;;AACM,QAAM,CAACM,KAAD,EAAOC,MAAP,IAAiBR,QAAQ,EAA/B;AACA,QAAM,CAACS,KAAD,EAAOC,QAAP,IAAmBV,QAAQ,CAAC,EAAD,CAAjC,CAXiB,CAcjB;;AAEA,WAASW,YAAT,CAAsBC,YAAtB,EAAmC;AACjCF,IAAAA,QAAQ,CAAC,EAAD,CAAR;;AACA,QAAGE,YAAY,IAAI,EAAnB,EAAsB;AAEpB;AACD;;AACD,QAAIC,GAAG,GAAG,kFAAV;AACA,QAAIC,KAAK,GAAG;AACV,eAAS;AACP,gBAAQ;AACN,kBAAQ,CACN;AAAC,qBAAS;AAAC,8BAAgBF;AAAjB;AAAV,WADM;AADF;AADD,OADC;AAQV,cAAQ;AACN,mBAAY;AACV,mBAAS;AACP,qBAAS;AADF;AADC;AADN,OARE;AAeV,cAAQ;AAfE,KAAZ;AAkBA,QAAIG,MAAM,GAAG;AACX,eAAS;AACL,gBAAQ;AACN,kBAAO,CACH;AACE,4BAAe;AACf,wBAAU,CAAC,UAAD,EAAY,QAAZ,EAAqB,UAArB,EAAgC,MAAhC,EAAuC,cAAvC,CADK;AAEb,uBAAU,GAAEH,YAAa,GAFZ;AAGb,sCAAwB;AAHX;AADjB,WADG;AADD;AADH;AADE,KAAb;AAgBA,QAAII,MAAM,GAAG;AACX,eAAS;AACP,gBAAQ;AACN,kBAAQ,CACN;AAAC,2BAAe;AACd,uBAASJ,YADK;AAEd,wBAAU,CAAC,QAAD,EAAU,QAAV,EAAmB,YAAnB;AAFI;AAAhB,WADM;AADF;AADD;AADE,KAAb;AAaN,QAAIK,MAAM,GAAG;AACZ,iBAAU,CAAC,QAAD,EAAU,QAAV,EAAmB,YAAnB,EAAgC,cAAhC,EAA+C,cAA/C,EAA8D,SAA9D,CADE;AAEZ,eAAS;AACT,gBAAQ;AACP,kBAAO,CACN;AACA,4BAAe;AACb,wBAAU,CAAC,UAAD,EAAY,UAAZ,EAAuB,cAAvB,EAAsC,gBAAtC,EAAuD,cAAvD,CADG;AAEb,uBAAU,GAAEL,YAAa,GAFZ;AAGb,sCAAwB;AAHX;AADf,WADM;AADA;AADC;AAFG,KAAb;AAqBQT,IAAAA,KAAK,CAACe,IAAN,CAAWL,GAAX,EAAgBI,MAAhB,EACGE,IADH,CACSC,CAAC,IAAI;AACV,UAAGA,CAAC,CAACC,MAAF,KAAa,GAAhB,EAAqB;AACnBC,QAAAA,OAAO,CAACC,GAAR,CAAYH,CAAC,CAACI,IAAd;AACA,YAAIC,UAAU,GAAGL,CAAC,CAACI,IAAF,CAAOE,IAAP,CAAYA,IAA7B,CAFmB,CAInB;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,YAAIC,IAAI,GAAGF,UAAU,CAACG,GAAX,CAAeC,IAAI,IAAI;AAChC,cAAIC,KAAK,GAAG,EAAZ;AACA,cAAIC,IAAI,GAAG,EAAX;AACA,cAAIC,KAAJ;AACA,cAAIC,KAAK,GAAGJ,IAAI,CAACK,MAAjB;;AAEA,cAAGD,KAAK,KAAK,qBAAb,EAAmC;AAEjCF,YAAAA,IAAI,GAAGF,IAAI,CAACM,OAAL,CAAaC,IAApB;;AACA,gBAAG,CAACL,IAAJ,EAAS;AACPA,cAAAA,IAAI,GAAG,GAAP;AACD,aALgC,CAMjC;;;AACAD,YAAAA,KAAK,GAAI,kBAAiBD,IAAI,CAACM,OAAL,CAAavB,YAAa,cAAamB,IAAK,GAAEF,IAAI,CAACM,OAAL,CAAavB,YAAa,+BAAlG,CAPiC,CAUjC;AACA;AAEA;AACD,WAdD,MAeK,IAAGqB,KAAK,IAAI,wBAAZ,EAAqC;AACxC;AACAH,YAAAA,KAAK,GAAI,YAAWD,IAAI,CAACM,OAAL,CAAaE,MAAO,gBAAeR,IAAI,CAACM,OAAL,CAAaG,OAAQ,iCAA5E,CAFwC,CAGxC;AAEA;AACD;;AAED,iBAAO;AACL,qBAAQR,KADH;AAEL,qBAAQA,KAFH;AAGL,oBAAOC;AAHF,WAAP;AAMD,SAnCU,CAAX;AAoCAT,QAAAA,OAAO,CAACC,GAAR,CAAYI,IAAZ;AACAjB,QAAAA,QAAQ,CAACiB,IAAD,CAAR;AACD,OA1DD,MA2DI;AACFL,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACD;AACF,KAhEH,EAiEGgB,KAjEH,CAiEUC,KAAK,IAAI;AACf,UAAIA,KAAJ,EAAW;AACTlB,QAAAA,OAAO,CAACC,GAAR,CAAYiB,KAAZ;AACD,OAFD,MAGI;AACFlB,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACD;AACF,KAxEH;AAyEH,GApKgB,CAsKvB;;;AAEA;AAAA;AACE;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,IAAI,EAAC,GAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,eAEQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFR,eAEc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFd,eAIE,oBAAC,YAAD;AACM,MAAA,YAAY,EAAGM,IAAD,IAAUA,IAAI,CAACE,IADnC;AAEM,MAAA,KAAK,EAAEtB,KAFb;AAGM,MAAA,UAAU,EAAE,CAACoB,IAAD,EAAOY,aAAP,kBACV;AAAK,QAAA,KAAK,EAAE;AAAEC,UAAAA,UAAU,EAAED,aAAa,GAAG,WAAH,GAAiB;AAA5C,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAEE,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAE;AAAChC,UAAAA;AAAD,SAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACCoB,IAAI,CAACG,KADN,CAFF,CAJR;AAYM,MAAA,KAAK,EAAEzB,KAZb;AAaM,MAAA,QAAQ,EAAGoC,CAAD,IAAO;AAACnC,QAAAA,MAAM,CAACmC,CAAC,CAACC,MAAF,CAASrC,KAAV,CAAN;AAAuBI,QAAAA,YAAY,CAACgC,CAAC,CAACC,MAAF,CAASrC,KAAV,CAAZ;AAA6Be,QAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA8BoB,CAAC,CAACC,MAAF,CAASrC,KAAvC,EAA6C,GAA7C;AAAkD,OAb9H;AAeM,MAAA,QAAQ,EAAGsC,GAAD,IAAS;AAACrC,QAAAA,MAAM,CAACqC,GAAD,CAAN;AAAYvB,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAkBsB,GAAlB;AAAuB,OAf7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF;AAFF;AA2BD;;AAKD,eAAexC,QAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Autocomplete from 'react-autocomplete';\nimport axios from 'axios'\n// import { useHistory } from 'react-router-dom';\nimport {Link} from \"react-router-dom\";\n// import {Link,useLocation,withRouter,Redirect} from \"react-router-dom\";\n\n\nfunction AutoComo(props) {\n\n  useEffect(() => {\n    // console.log(\"props\",props)\n  },[])\n    \n  // const history = useHistory();\n  // const goLogin = () => history.push('login');\n    \n  // const [value,setVal] = useState({ title: 'The Shawshank Redemption', year: 1994 })\n        const [value,setVal] = useState()\n        const [items,setItems] = useState([])\n    \n        \n        // var value = \"\"\n    \n        function handleChange(VariableName){\n          setItems([]);\n          if(VariableName == \"\"){\n            \n            return\n          }\n          var url = 'https://elastic.airesearch.in/economics_v102_test,trade_import_yearly_v1/_search'\n          var query = {\n            \"query\": {\n              \"bool\": {\n                \"must\": [\n                  {\"fuzzy\": {\"VariablePath\": VariableName}}\n                ]\n              }\n            },\n            \"aggs\": {\n              \"varpath\" : {\n                \"terms\": {\n                  \"field\": \"VariablePath.keyword\"\n                }\n              }\n            },\n            \"size\": 0\n          }\n\n          var query2 = {\n            \"query\": {\n                \"bool\": {\n                  \"must\":[\n                      {\n                        \"query_string\":{\n                        \"fields\": [\"HSCode^4\",\"Level5\",\"HSName^4\",\"path\",\"HSCodeName^4\"],\n                          \"query\": `${VariableName}~`,\n                          \"minimum_should_match\": 1\n                        }\n                      }\n                  ]\n                }\n            }\n          }\n\n          var query3 = {\n            \"query\": {\n              \"bool\": {\n                \"must\": [\n                  {\"multi_match\": {\n                    \"query\": VariableName,\n                    \"fields\": [\"HSCode\",\"Level5\",\"HSName.raw\"]\n                  }}\n                ]\n              }\n            }\n          }\n\t\t  \n\t\t  var query4 = {   \n\t\t\t\t\t\"_source\":[\"HSCode\",\"HSName\",\"HSCodeName\",\"VariableName\",\"VariablePath\",\"Country\"],\n\t\t\t\t\t\"query\": {\n\t\t\t\t\t\"bool\": {\n\t\t\t\t\t\t\"must\":[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"query_string\":{\n\t\t\t\t\t\t\t\t\t\"fields\": [\"HSCode^3\",\"HSName^2\",\"HSCodeName^2\",\"VariableName^5\",\"VariablePath\"],\n\t\t\t\t\t\t\t\t\t\"query\": `${VariableName}~`,\n\t\t\t\t\t\t\t\t\t\"minimum_should_match\": 1\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n          \n    \n          \n            \n            \n            axios.post(url, query4)\n              .then( d => {\n                if(d.status === 200 ){\n                  console.log(d.data);\n                  let total_data = d.data.hits.hits\n\n                  // let list = data_list.map(s => {\n                  //   // return {'label' :s.key.split(\"/\").join(\" > \"),'path':s.key}\n    \n                  //   return {\n                  //     'title':s.key,\n                  //     'label' :s.key.split(\"/\").join(\" > \"),\n                  //     'path':\"chart/\"+s.key.substring(s.key.indexOf('/')+1)\n                  //   }\n                  //   return {\n                  //     'title':s.key,\n                  //     'label' :s.key.split(\"/\").join(\" > \"),\n                  //     'path':\"chart/\"+s.key.substring(s.key.indexOf('/')+1)\n                  //   }\n                  // })\n                  \n\n                  let list = total_data.map(item => {\n                    let title = \"\"\n                    let path = \"\"\n                    let label;\n                    let index = item._index\n\n                    if(index === \"economics_v102_test\"){\n\n                      path = item._source.Path\n                      if(!path){\n                        path = \" \"\n                      }\n                      // title = `Path : ${path}       VARIABLE Name -${item._source.VariableName}        PRODUCT : AI-TradeAnalytics`\n                      title = `VARIABLE Name -${item._source.VariableName}    Path : ${path}${item._source.VariableName}       PRODUCT : AI-Economics`;\n                      \n                      \n                      // label = path.split(\"/\").join(\" > \");\n                      // label = title;\n\n                      // path = `AI-Economics/${path}${item._source.VariableName}`;\n                    }\n                    else if(index == \"trade_import_yearly_v1\"){\n                      // title = `HSCodeName - ${item._source.HSCodeName}      HSCode - ${item._source.HSCode}       PRODUCT : AI-Economics`;\n                      title = `HSCode - ${item._source.HSCode}   Country - ${item._source.Country}    PRODUCT : AI-TradeAnalytics`;\n                      // path = `AI-TradeAnalytics/${item._source.HSCode}`\n\n                      // label = title;\n                    }\n\n                    return {\n                      'title':title,\n                      'label':title,\n                      'path':path,\n                    }\n\n                  })\n                  console.log(list)\n                  setItems(list)\n                }\n                else{\n                  console.log(\"err\")\n                }\n              })\n              .catch( error => {\n                if (error) {\n                  console.log(error)\n                }\n                else{\n                  console.log(\"Error!\");\n                }\n              });\n        }\n\n  // const classes = useStyles();\n\n  return (\n    // <div className={classes.root}>\n    <div>\n      <a href=\"/\" >home</a>\n      <br /><br /><br />\n      \n      <Autocomplete\n            getItemValue={(item) => item.path}\n            items={items}\n            renderItem={(item, isHighlighted) =>\n              <div style={{ background: isHighlighted ? 'lightgray' : 'white' }}>\n                \n                <Link to={{items}}>\n                {item.label}\n                </Link>\n                \n              </div>\n            }\n            value={value}\n            onChange={(e) => {setVal(e.target.value);handleChange(e.target.value);console.log(\"target value is\",e.target.value,\".\")}}\n            \n            onSelect={(val) => {setVal(val);console.log(\"val\",val)}}\n        />\n          \n          \n    </div>\n  );\n}\n\n\n\n\nexport default AutoComo ;"]},"metadata":{},"sourceType":"module"}