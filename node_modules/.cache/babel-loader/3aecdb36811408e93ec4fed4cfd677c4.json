{"ast":null,"code":"var _jsxFileName = \"/home/manoj/Documents/AI/trade_search/src/search.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Autocomplete from 'react-autocomplete';\nimport axios from 'axios'; // import { useHistory } from 'react-router-dom';\n\nimport { Link } from \"react-router-dom\"; // import {Link,useLocation,withRouter,Redirect} from \"react-router-dom\";\n\nfunction AutoComo(props) {\n  useEffect(() => {}, []);\n  const [value, setVal] = useState();\n  const [items, setItems] = useState([]); // var value = \"\"\n\n  function handleChange(VariableName) {\n    setItems([]);\n\n    if (VariableName === \"\") {\n      return;\n    }\n\n    var url = 'https://elastic.airesearch.in/economics_v102_test,demographics_v1_test,trade_export_yearly_v1,trade_import_yearly_v1/_search';\n    var query4 = {\n      \"_source\": [\"HSCodeName\", \"VariableName\", \"VariablePath\"],\n      \"query\": {\n        \"bool\": {\n          \"must\": [{\n            \"query_string\": {\n              \"fields\": [\"HSCode^3\", \"HSName^2\", \"HSCodeName^2\", \"Country\", \"VariableName^5\", \"VariablePath\", \"Level1\", \"Level2\", \"Level3\", \"Level4\", \"Level5\"],\n              \"query\": `${VariableName}~`,\n              \"minimum_should_match\": 1\n            }\n          }]\n        }\n      }\n    };\n    axios.post(url, query4).then(d => {\n      if (d.status === 200) {\n        console.log(d.data);\n        let total_data = d.data.hits.hits;\n        let list = get_list_from_buckets(total_data);\n        console.log(list);\n        setItems(list);\n      } else {\n        console.log(\"err\");\n      }\n    }).catch(error => {\n      if (error) {\n        console.log(error);\n      } else {\n        console.log(\"Error!\");\n      }\n    });\n  } // const classes = useStyles();\n\n\n  return (\n    /*#__PURE__*/\n    // <div className={classes.root}>\n    React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 7\n      }\n    }, \"home\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Autocomplete, {\n      getItemValue: item => item.path,\n      items: items,\n      enderItem: (item, isHighlighted) => /*#__PURE__*/React.createElement(\"div\", {\n        className: \"searchDrop\",\n        style: {\n          background: isHighlighted ? 'lightgray' : 'black'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: `/${item.path}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }\n      }, item.label)),\n      value: value,\n      onChange: e => {\n        setVal(e.target.value);\n        handleChange(e.target.value);\n      } // onSelect={(val) => {setVal(val);console.log(\"val\",val)}}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 7\n      }\n    }))\n  );\n}\n\nfunction get_list_from_buckets(buckets) {\n  let economics_href = \"\";\n  let demographics_href = \"\";\n  let trade_export_href = \"\";\n  let trade_import_href = \"\";\n  let list_bucket = buckets.map(item => {\n    let index = item._index; // console.log(index)\n\n    let href = \"\";\n    let title = \"\";\n\n    if (index === \"economics_v102_test\") {\n      href = economics_href + item._source.Variablepath;\n      title = item._source.VariableName;\n    }\n\n    if (index === \"demographics_v1_test\") {\n      href = demographics_href + item._source.Variablepath;\n      title = item._source.VariableName;\n    }\n\n    if (index === \"trade_export_yearly_v1\") {\n      href = trade_export_href + item._source.Variablepath;\n      title = item._source.HSCodeName;\n    }\n\n    if (index === \"trade_import_yearly_v1\") {\n      href = trade_import_href + item._source.Variablepath;\n      title = item._source.HSCodeName;\n    } // console.log(index, title)\n\n\n    return {\n      index: index,\n      title: title,\n      href: href\n    };\n  });\n}\n\nexport default AutoComo;","map":{"version":3,"sources":["/home/manoj/Documents/AI/trade_search/src/search.js"],"names":["React","useState","useEffect","Autocomplete","axios","Link","AutoComo","props","value","setVal","items","setItems","handleChange","VariableName","url","query4","post","then","d","status","console","log","data","total_data","hits","list","get_list_from_buckets","catch","error","item","path","isHighlighted","background","label","e","target","buckets","economics_href","demographics_href","trade_export_href","trade_import_href","list_bucket","map","index","_index","href","title","_source","Variablepath","HSCodeName"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Autocomplete from 'react-autocomplete';\nimport axios from 'axios'\n// import { useHistory } from 'react-router-dom';\nimport {Link} from \"react-router-dom\";\n// import {Link,useLocation,withRouter,Redirect} from \"react-router-dom\";\n\n\nfunction AutoComo(props) {\n\n  \n  useEffect(() => {\n  },[])\n\n  const [value,setVal] = useState()\n  const [items,setItems] = useState([])\n\n  \n  // var value = \"\"\n\n  function handleChange(VariableName){\n    setItems([]);\n    if(VariableName === \"\"){\n      \n      return\n    }\n  \n    var url = 'https://elastic.airesearch.in/economics_v102_test,demographics_v1_test,trade_export_yearly_v1,trade_import_yearly_v1/_search'\n          \n  var query4 = {   \n      \"_source\":[\"HSCodeName\",\"VariableName\",\"VariablePath\"],\n      \"query\": {\n      \"bool\": {\n        \"must\":[\n          {\n          \"query_string\":{\n              \"fields\": [\"HSCode^3\",\"HSName^2\",\"HSCodeName^2\",\"Country\",\"VariableName^5\",\"VariablePath\",\"Level1\",\"Level2\",\"Level3\",\"Level4\",\"Level5\"],\n              \"query\": `${VariableName}~`,\n              \"minimum_should_match\": 1\n            }\n          }\n        ]\n      }\n    }\n  }\n    \n          \n            \n            \n  axios.post(url, query4)\n    .then( d => {\n      if(d.status === 200 ){\n        console.log(d.data);\n        let total_data = d.data.hits.hits\n\n        let list = get_list_from_buckets(total_data)\n        console.log(list)\n        setItems(list)\n      }\n      else{\n        console.log(\"err\")\n      }\n    })\n    .catch( error => {\n      if (error) {\n        console.log(error)\n      }\n      else{\n        console.log(\"Error!\");\n      }\n    });\n\n}\n\n  // const classes = useStyles();\n\n\n  return (\n    // <div className={classes.root}>\n    <div>\n      <a href=\"/\" >home</a>\n      <br /><br /><br />\n      \n      <Autocomplete\n            getItemValue={(item) => item.path}\n            items={items}\n            enderItem={(item, isHighlighted) =>\n              <div className=\"searchDrop\"  style={{background: isHighlighted ? 'lightgray' : 'black' }}>\n                <Link to={`/${item.path}`}>\n                 {item.label}\n                </Link>\n              </div>\n            }\n            value={value}\n            onChange={(e) => {setVal(e.target.value);handleChange(e.target.value)}}\n            \n            // onSelect={(val) => {setVal(val);console.log(\"val\",val)}}\n        />\n          \n          \n    </div>\n  );\n}\n\n\n  \n  function get_list_from_buckets(buckets){\n    let economics_href = \"\"\n    let demographics_href = \"\"\n    let trade_export_href  = \"\"\n    let trade_import_href  = \"\"  \n    \n    let list_bucket = buckets.map(item =>{\n      let index = item._index\n      // console.log(index)\n      let href = \"\"\n      let title = \"\"\n      if(index === \"economics_v102_test\"){\n        href = economics_href+item._source.Variablepath\n        title = item._source.VariableName\n      }\n      if(index === \"demographics_v1_test\"){\n        href = demographics_href+item._source.Variablepath\n        title = item._source.VariableName\n      }\n      if(index === \"trade_export_yearly_v1\"){\n        href = trade_export_href+item._source.Variablepath\n        title = item._source.HSCodeName\n      }\n      if(index === \"trade_import_yearly_v1\"){\n        href = trade_import_href+item._source.Variablepath\n        title = item._source.HSCodeName\n      }\n      // console.log(index, title)\n      return {index:index, title:title, href:href}\n    })\n  }\n\n\n\nexport default AutoComo ;"]},"metadata":{},"sourceType":"module"}